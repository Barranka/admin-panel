(function(e){function t(t){for(var n,o,i=t[0],l=t[1],u=t[2],d=0,m=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&m.push(a[o][0]),a[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);c&&c(t);while(m.length)m.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,i=1;i<r.length;i++){var l=r[i];0!==a[l]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=r[0]))}return e}var n={},a={app:0},s=[];function o(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=e,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],l=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var c=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"0ae5":function(e,t,r){"use strict";var n=r("f57d"),a=r.n(n);a.a},"2c3d":function(e,t,r){},"3c47":function(e,t,r){"use strict";var n=r("2c3d"),a=r.n(n);a.a},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper"},[r("header",[r("div",{staticClass:"navbar"},[r("div",{staticClass:"container"},[r("div",{staticClass:"navbar-content"},[r("div",{staticClass:"logo"},[e._v("Личный кабинет")]),r("ul",{staticClass:"navbar-list"},[r("li",{staticClass:"navbar-item"},[e.authArea?r("router-link",{staticClass:"navbar-link",attrs:{to:"/"}},[e._v("Авторизация")]):e._e(),0==e.authArea?r("router-link",{staticClass:"navbar-link",attrs:{to:"/"}},[r("el-row",{staticClass:"logoutArea"},[r("el-button",{attrs:{plain:""},on:{click:function(t){return e.logOut()}}},[e._v("Выйти")])],1)],1):e._e()],1)])])])])]),r("router-view")],1)},s=[],o=(r("b0c0"),{data:function(){return{authArea:!0}},created:function(){this.loadedNab()},methods:{loadedNab:function(){"auth"===this.$route.name?this.authArea=!0:this.authArea=!1},logOut:function(){this.$store.dispatch("logoutUser")}},watch:{$route:"loadedNab"}}),i=o,l=(r("5c0b"),r("2877")),u=Object(l["a"])(i,a,s,!1,null,null,null),c=u.exports,d=r("8c4f"),m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper-content wrapper-content--fixed"},[r("authForm")],1)},f=[],p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"container"},[r("el-form",{ref:"validateForm",staticClass:"demo-dynamic",attrs:{model:e.validateForm,"label-width":"120px"}},[r("el-form-item",{attrs:{prop:"email",label:"Email",rules:e.rules.email}},[r("el-input",{model:{value:e.validateForm.email,callback:function(t){e.$set(e.validateForm,"email",t)},expression:"validateForm.email"}})],1),r("el-form-item",{attrs:{label:"Password",prop:"pass",rules:e.rules.pass}},[r("el-input",{attrs:{type:"password",autocomplete:"off"},model:{value:e.validateForm.pass,callback:function(t){e.$set(e.validateForm,"pass",t)},expression:"validateForm.pass"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("validateForm")}}},[e._v("Войти")])],1)],1)],1)])},h=[],b={data:function(){return{validateForm:{email:"",pass:""},rules:{pass:[{required:!0,message:"Пожалуйста введите пароль",trigger:"change"}],email:[{required:!0,message:"Пожалуйста введите ваш email",trigger:"change"},{type:"email",message:"Пожалуйста введите корректный email",trigger:"change"}]}}},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&(t.$store.dispatch("authUser",t.validateForm),t.resetForm())}))},resetForm:function(){var e=this;this.validateForm.email="",this.validateForm.pass="",this.$nextTick((function(){return e.$refs.validateForm.clearValidate()}))}}},v=b,g=(r("0ae5"),Object(l["a"])(v,p,h,!1,null,null,null)),w=g.exports,k={components:{authForm:w},mounted:function(){(this.$store.state.token||localStorage.getItem("token"))&&this.$router.push("/admin")}},_=k,y=Object(l["a"])(_,m,f,!1,null,null,null),$=y.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper-content wrapper-content--fixed"},[e.showAdmin?r("contactsForm"):e._e()],1)},C=[],E=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("div",{staticClass:"container"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.filterData()}},[r("el-table-column",{attrs:{label:"Date",prop:"date",sortable:"","filter-method":e.filterHandler}}),r("el-table-column",{attrs:{label:"Имя",prop:"name",sortable:"","filter-method":e.filterHandler}}),r("el-table-column",{attrs:{label:"Фамилия",prop:"firstname",sortable:"","filter-method":e.filterHandler}}),r("el-table-column",{attrs:{label:"Телефон",prop:"phone"}}),r("el-table-column",{attrs:{align:"right"},scopedSlots:e._u([{key:"header",fn:function(t){return[r("el-input",{attrs:{size:"mini",placeholder:"Введите для поиска"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})]}},{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini"},on:{click:function(r){return e.userEdit(t.$index,t.row)}}},[e._v("Изменить")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.userDelete(t.$index,t.row)}}},[e._v("Удалить")])]}}])})],1),r("el-row",{staticClass:"edditContactArea"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.showModal=!0}}},[e._v("Добавить контакт")])],1)],1),e.showModal?r("modal",{attrs:{user:e.user},on:{save:function(t){return e.addUser(e.user)},close:function(t){e.showModal=!1}}}):e._e(),e.showModalEdit?r("modalEdit",{attrs:{user:e.editUser.user},on:{save:function(t){return e.userEditInStore(e.editUser)},close:function(t){e.showModalEdit=!1}}}):e._e()],1)},O=[],F=(r("4de4"),r("caad"),r("ac1f"),r("2532"),r("841c"),r("5530")),j=r("2f62"),U=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"modal"}},[r("div",{staticClass:"modal__wrapper",on:{click:function(t){return t.target!==t.currentTarget?null:e.$emit("close")}}},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[r("span",{staticClass:"modal-title"},[e._v("Добавить контакт")]),r("span",{staticClass:"button-close",on:{click:function(t){return e.$emit("close")}}},[e._v("×")])]),r("div",{staticClass:"modal-body"},[r("el-form",{ref:"user",staticClass:"form",attrs:{model:e.user,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{prop:"name",label:"Имя",rules:e.rules.name}},[r("el-input",{attrs:{placeholder:"Введите ваше имя"},model:{value:e.user.name,callback:function(t){e.$set(e.user,"name",t)},expression:"user.name"}})],1),r("el-form-item",{attrs:{prop:"firstname",label:"Фамилия",rules:e.rules.firstname}},[r("el-input",{attrs:{placeholder:"Введите вашу фамилию"},model:{value:e.user.firstname,callback:function(t){e.$set(e.user,"firstname",t)},expression:"user.firstname"}})],1),r("el-form-item",{attrs:{prop:"phone",label:"Телефон",rules:e.rules.phone}},[r("el-input",{attrs:{placeholder:"Введите номер телефона"},model:{value:e.user.phone,callback:function(t){e.$set(e.user,"phone",t)},expression:"user.phone"}})],1)],1),r("el-row",{staticClass:"form__button"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("user")}}},[e._v("Сохранить")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){e.$emit("close"),e.resetForm("user")}}},[e._v("Отменить")])],1)],1)])])])},S=[],M={props:{user:{type:Object,required:!0}},data:function(){return{rules:{name:[{required:!0,message:"Введите ваше имя",trigger:"change"},{min:3,max:10,message:"Имя должно быть от 3 до 10 букв",trigger:"change"}],firstname:[{required:!0,message:"Введите вашу фамилию",trigger:"change"},{min:3,max:10,message:"Фамилия должна быть от 3 до 10 букв",trigger:"change"}],phone:[{required:!0,message:"Введите ваш номер телефона",trigger:"change"},{max:11,message:"Введите корректный номер из 11 цифр",trigger:"change"}]}}},mounted:function(){this.resetForm()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.$emit("save",t.user)}))},resetForm:function(e){var t=this;this.user.name="",this.user.firstname="",this.user.phone="",this.$nextTick((function(){return t.$refs.user.clearValidate()}))}}},T=M,D=(r("bbb1"),Object(l["a"])(T,U,S,!1,null,"be716dba",null)),L=D.exports,A=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("transition",{attrs:{name:"modal"}},[r("div",{staticClass:"modal__wrapper",on:{click:function(t){return t.target!==t.currentTarget?null:e.$emit("close")}}},[r("div",{staticClass:"modal-content"},[r("div",{staticClass:"modal-header"},[r("span",{staticClass:"modal-title"},[e._v("Добавить контакт")]),r("span",{staticClass:"button-close",on:{click:function(t){return e.$emit("close")}}},[e._v("×")])]),r("div",{staticClass:"modal-body"},[r("el-form",{ref:"userEdit",staticClass:"form",attrs:{model:e.userEdit,rules:e.rules,"label-width":"120px"}},[r("el-form-item",{attrs:{prop:"name",label:"Имя",rules:e.rules.name}},[r("el-input",{attrs:{placeholder:"Введите ваше имя"},model:{value:e.userEdit.name,callback:function(t){e.$set(e.userEdit,"name",t)},expression:"userEdit.name"}})],1),r("el-form-item",{attrs:{prop:"firstname",label:"Фамилия",rules:e.rules.firstname}},[r("el-input",{attrs:{placeholder:"Введите вашу фамилию"},model:{value:e.userEdit.firstname,callback:function(t){e.$set(e.userEdit,"firstname",t)},expression:"userEdit.firstname"}})],1),r("el-form-item",{attrs:{prop:"phone",label:"Телефон",rules:e.rules.phone}},[r("el-input",{attrs:{placeholder:"Введите номер телефона"},model:{value:e.userEdit.phone,callback:function(t){e.$set(e.userEdit,"phone",t)},expression:"userEdit.phone"}})],1)],1),r("el-row",{staticClass:"form__button"},[r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("userEdit")}}},[e._v("Сохранить")]),r("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.$emit("close")}}},[e._v("Отменить")])],1)],1)])])])},I=[],q={props:{userEdit:{type:Object,required:!0}},data:function(){return{rules:{name:[{required:!0,message:"Введите ваше имя",trigger:"change"},{min:3,max:10,message:"Имя должно быть от 3 до 10 букв",trigger:"change"}],firstname:[{required:!0,message:"Введите вашу фамилию",trigger:"change"},{min:3,max:10,message:"Фамилия должна быть от 3 до 10 букв",trigger:"change"}],phone:[{required:!0,message:"Введите ваш номер телефона",trigger:"change"},{max:11,message:"Введите корректный номер",trigger:"change"}]}}},mounted:function(){this.resetForm()},methods:{submitForm:function(e){var t=this;this.$refs[e].validate((function(e){e&&t.$emit("save",t.userEdit)}))},resetForm:function(e){var t=this;this.user.name="",this.user.firstname="",this.user.phone="",this.$nextTick((function(){return t.$refs.user.clearValidate()}))}}},P=q,V=(r("5b31"),Object(l["a"])(P,A,I,!1,null,"52869e3c",null)),z=V.exports,B={components:{modal:L,modalEdit:z},data:function(){return{search:"",showModal:!1,showModalEdit:!1,editUser:{user:"",index:""},user:{name:"",firstname:"",phone:"",date:new Date(Date.now()).toLocaleString()}}},created:function(){return this.$store.dispatch("getUsers")},computed:Object(F["a"])({},Object(j["b"])({tableData:function(e){return e.usersLoaded}})),methods:{filterData:function(){var e=this;return this.tableData.filter((function(t){return!e.search||t.firstname.toLowerCase().includes(e.search.toLowerCase())||t.name.toLowerCase().includes(e.search.toLowerCase())}))},userEdit:function(e,t){this.editUser.user=t,this.editUser.index=e,this.showModalEdit=!0},userEditInStore:function(e){this.showModalEdit=!1,this.$store.dispatch("userEdit",e).then((function(e){return console.log("Контакт изменен!")})).catch((function(e){return console.log(e)}))},userDelete:function(e,t){this.$store.dispatch("userDelete",{index:e,row:t}).then((function(e){return console.log("Контакт удален!")})).catch((function(e){return console.log(e)}))},addUser:function(e){this.showModal=!1,this.$store.dispatch("setUser",e).then((function(e){return console.log("Контакт добавлен!")})).catch((function(e){return console.log(e)}))},filterHandler:function(e,t,r){var n=r["property"];return t[n]===e}}},H=B,N=(r("5d6e"),Object(l["a"])(H,E,O,!1,null,null,null)),J=N.exports,Q={components:{contactsForm:J},data:function(){return{showAdmin:!1}},mounted:function(){this.$store.state.token||localStorage.getItem("token")?this.showAdmin=!0:this.$router.push("/")}},R=Q,W=Object(l["a"])(R,x,C,!1,null,null,null),G=W.exports,K=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrapper-content wrapper-content--fixed"},[r("section",[r("div",{staticClass:"container"},[r("h1",{staticClass:"title"},[e._v("Страница не найдена!")]),r("p",[e._v("Перейти на "),r("router-link",{staticClass:"link",attrs:{to:"/"}},[e._v("страницу авторизации?")])],1)])])])},X=[],Y=(r("3c47"),{}),Z=Object(l["a"])(Y,K,X,!1,null,"360b8b4e",null),ee=Z.exports;n["default"].use(d["a"]);var te=new d["a"]({base:"./",scrollBehavior:function(){return{x:0,y:0}},routes:[{path:"/",name:"auth",component:$},{path:"/admin",name:"admin",component:G},{path:"*",name:"notFound",component:ee}]}),re=(r("4160"),r("a434"),r("b64b"),r("159b"),r("bc3a")),ne=r.n(re);n["default"].use(j["a"]);var ae=new j["a"].Store({state:{usersLoaded:[],token:null|localStorage.getItem("token")},mutations:{getUsers:function(e,t){e.usersLoaded=t},setUser:function(e,t){e.usersLoaded.push(t)},userEdit:function(e,t){e.usersLoaded.splice(t.index,1,t.user)},userDelete:function(e,t){e.usersLoaded.splice(t,1)},setToken:function(e,t){e.token=t},destroyToken:function(e){e.token=null}},actions:{getUsers:function(e,t){var r=e.commit;return ne.a.get("https://admin-b3f80.firebaseio.com/users.json").then((function(e){e.data||(e.data={});var t=[];Object.keys(e.data).forEach((function(r){t.push(Object(F["a"])(Object(F["a"])({},e.data[r]),{},{id:r}))})),r("getUsers",t)})).catch((function(e){return console.log(e)}))},setUser:function(e,t){var r=e.commit;return ne.a.post("https://admin-b3f80.firebaseio.com/users.json",t).then((function(e){return r("setUser",Object(F["a"])(Object(F["a"])({},t),{},{id:e.data.name}))})).catch((function(e){return console.log(e)}))},userEdit:function(e,t){var r=e.commit;return ne.a.put("https://admin-b3f80.firebaseio.com/users/".concat(t.user.id,".json"),t.user).then((function(e){return r("userEdit",t)})).catch((function(e){return console.log(e)}))},userDelete:function(e,t){var r=e.commit;return ne.a.delete("https://admin-b3f80.firebaseio.com/users/".concat(t.row.id,".json"),t).then((function(e){return r("userDelete",t.index)})).catch((function(e){return console.log(e)}))},authUser:function(e,t){var r=e.commit,n="AIzaSyBpSbV6fwxOS7BLtrN9OlVQOLuyiURBdbI";return ne.a.post("https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=".concat(n),{email:t.email,password:t.pass,returnSecureToken:!0}).then((function(e){te.push("/admin");var t=e.data.idToken;r("setToken",t),localStorage.setItem("token",t)})).catch((function(e){return console.log("Пароль и email не найден!")}))},logoutUser:function(e){var t=e.commit;t("destroyToken"),localStorage.removeItem("token"),te.push("/")}}}),se=r("5c96"),oe=r.n(se);r("0fae");n["default"].use(oe.a);var ie=r("dccd"),le=r.n(ie),ue=r("4897"),ce=r.n(ue);r("c1c3");ce.a.use(le.a),n["default"].config.productionTip=!1,new n["default"]({router:te,store:ae,elementUI:void 0,render:function(e){return e(c)}}).$mount("#app")},"5b31":function(e,t,r){"use strict";var n=r("69d7"),a=r.n(n);a.a},"5c0b":function(e,t,r){"use strict";var n=r("9c0c"),a=r.n(n);a.a},"5d6e":function(e,t,r){"use strict";var n=r("5df8"),a=r.n(n);a.a},"5df8":function(e,t,r){},"69d7":function(e,t,r){},"75f3":function(e,t,r){},"9c0c":function(e,t,r){},bbb1:function(e,t,r){"use strict";var n=r("75f3"),a=r.n(n);a.a},c1c3:function(e,t,r){},f57d:function(e,t,r){}});